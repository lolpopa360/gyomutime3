<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="dark light" />
    <title>교무타임 • 제출 관리</title>
    <link rel="icon" href="assets/img/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="assets/css/styles.css" />
  </head>
  <body>
    <a class="skip-link" href="#main">본문으로 바로가기</a>
    <header class="site-header" role="banner">
      <div class="container header__inner">
        <a href="index.html" class="brand" aria-label="교무타임 홈" style="gap:.5rem;">
          <img src="assets/img/logo.svg" alt="교무타임" width="24" height="24" />
          <span>
            <strong>교무타임</strong>
            <small class="muted" style="display:block; font-size:.72rem; line-height:1;">제출 관리</small>
          </span>
        </a>
        <nav class="site-nav" role="navigation">
          <ul>
            <li><a href="index.html">홈</a></li>
            <li><a href="#" data-action="toggle-theme">테마 전환</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main id="main" class="site-main" tabindex="-1">
      <section class="hero">
        <div class="container" style="text-align:center;">
          <div class="pill"><span class="dot"></span>Admin Only</div>
          <h1 style="margin-top:.8rem;">제출 현황</h1>
          <p class="muted">사용자 제출을 검토하고 상태를 업데이트하세요.</p>
        </div>
      </section>

      <section class="section">
        <div class="container">
          <div id="admin-guard" class="card" style="display:none;"></div>
          <div id="subs-panel" class="card" style="display:none;">
            <div style="display:flex;justify-content:space-between;align-items:center;gap:.5rem;">
              <h2 style="margin:0;">제출 목록</h2>
              <div style="display:flex;gap:.5rem;align-items:center;">
                <select id="filter-status">
                  <option value="">전체 상태</option>
                  <option value="uploaded">uploaded</option>
                  <option value="processing">processing</option>
                  <option value="completed">completed</option>
                  <option value="rejected">rejected</option>
                </select>
                <input id="filter-q" placeholder="제목/이메일 검색" />
                <button id="export-csv" class="btn">CSV 내보내기</button>
              </div>
            </div>
            <div id="subs-list" style="margin-top:1rem;"></div>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer" role="contentinfo">
      <div class="container"><small>© <span id="year"></span> 교무타임</small></div>
    </footer>

    <div id="auth-modal" class="modal" hidden>
      <div class="modal__backdrop" data-close="modal"></div>
      <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="auth-title">
        <header class="modal__header">
          <h3 id="auth-title">계정</h3>
          <button class="btn" data-close="modal" aria-label="닫기">✕</button>
        </header>
        <div class="modal__body">
          <div id="auth-choice" class="choice-grid">
            <button class="choice-btn" data-choice="login">로그인</button>
            <button class="choice-btn" data-choice="register">회원가입</button>
            <button class="choice-btn" data-choice="admin">관리자 인증</button>
          </div>

          <form id="login-form" class="modal__form" autocomplete="on" hidden aria-labelledby="tab-login">
            <div id="auth-error" class="muted" style="color:#ef4444;display:none;"></div>
            <label>이메일<input name="email" type="email" required placeholder="you@example.com" /></label>
            <label>비밀번호<input name="password" type="password" required autocomplete="current-password" /></label>
            <div class="form-actions">
              <button class="btn btn--primary" type="submit">로그인</button>
            </div>
            <div class="hr-text">또는</div>
            <button class="btn" type="button" id="google-login">Google로 계속</button>
            <div class="form-footer"><a href="#" data-switch="register">회원가입</a><a href="#" data-open-admin>관리자 접속</a></div>
          </form>

          <form id="register-form" class="modal__form" hidden aria-labelledby="tab-register">
            <div id="auth-error-reg" class="muted" style="color:#ef4444;display:none;"></div>
            <label>이메일<input name="email" type="email" required placeholder="you@example.com" /></label>
            <label>비밀번호<input name="password" type="password" required minlength="6" autocomplete="new-password" /></label>
            <div class="form-actions">
              <button class="btn btn--primary" type="submit">회원가입</button>
            </div>
            <div class="hr-text">또는</div>
            <button class="btn" type="button" id="google-register">Google로 계속</button>
            <div class="form-footer" style="text-align:right;">
              <a href="#" data-switch="login">이미 계정이 있으신가요? 로그인</a>
            </div>
          </form>

          <form id="admin-form" class="modal__form" hidden>
            <p class="muted">관리자 콘솔 접속을 위한 추가 인증</p>
            <label>관리자 이메일<input name="email" type="email" required placeholder="admin@example.com" /></label>
            <label>관리자 비밀번호<input name="adminCode" type="password" required /></label>
            <div class="form-actions">
              <button class="btn btn--primary" type="submit">관리자 콘솔로 이동</button>
            </div>
            <div class="form-footer" style="justify-content:flex-end;"><a href="#" data-switch="choice">뒤로</a></div>
          </form>
        </div>
      </div>
    </div>

    <script type="module" src="assets/js/main.js"></script>
    <script type="module" src="assets/js/admin-submissions.js"></script>
    <script type="module" src="assets/js/auth-modal.js"></script>
  </body>
  </html>
